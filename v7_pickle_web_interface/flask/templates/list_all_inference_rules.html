{% extends "_base.html" %}
{% block content %}

<P>See the <a href="{{ url_for('user_documentation') }}#inference rules?referrer=list_all_inference_rules">documentation</a> for background on inference rules.
<P>
{% include '_table_of_inference_rules.html' %}

<P>
  <a id="add_inf_rule">
    <H2>Add new inference rule</h2> 
  </a>
  {% if not current_user.is_anonymous %}
    <form method="post" action="">
    <!-- https://flask-wtf.readthedocs.io/en/v0.12/csrf.html -->
    {{ add_infrule_webform.csrf_token }}
      <div class="form-group">
        <div class="input-group">

      <P>{{ add_infrule_webform.inf_rule_name.label }}: {{ add_infrule_webform.inf_rule_name(size=50, maxlength=300) }} <small>max length = 300 characters</small>
      <P>{{ add_infrule_webform.num_inputs.label }}:    {{ add_infrule_webform.num_inputs }}
      <P>{{ add_infrule_webform.num_feeds.label }}:     {{ add_infrule_webform.num_feeds }}
      <P>{{ add_infrule_webform.num_outputs.label }}:   {{ add_infrule_webform.num_outputs }}
      <P>{{ add_infrule_webform.latex.label }}:         {{ add_infrule_webform.latex(size=50, maxlength=300) }} <small>max length = 300 characters</small>
      <P>{{ add_infrule_webform.notes.label }}:         {{ add_infrule_webform.notes(size=50, maxlength=300) }} <small>max length = 300 characters</small>
    </div>
<!--    <input type="submit" name="submit_button" value="add"> -->
         <button type="submit" class="btn btn-default">Add</button>
      </div>
    </form>
  {% else %}
  This action requires you to be <a href="{{ url_for('login') }}?referrer=list_all_inference_rules">signed in</a>
  {% endif %}
</P>

<P>
  <a id="delete_inf_rule">
    <h2>Delete an inference rule</h2>
  </a>
  {% if not current_user.is_anonymous %}
Only inference rules not in use can be deleted.
<form method="post" action="">
    <!-- https://flask-wtf.readthedocs.io/en/v0.12/csrf.html -->
    <input type="hidden" name="csrf_token" value="{{ csrf_token() }}" />

  <div class="form-group">
    <div class="input-group">
        <span class="input-group-addon">Select from</span>
            <select name="delete_inf_rule" class="selectpicker form-control">
              {% for elem in sorted_list_infrules_not_in_use %}
              <option value="{{ elem }}">{{ elem }}</option>
              {% endfor %}
            </select>
    </div>
    <button type="submit" class="btn btn-default">Delete</button>
  </div>
</form>
  {% else %}
  This action requires you to be <a href="{{ url_for('login') }}?referrer=list_all_inference_rules">signed in</a>
  {% endif %}
</P>

<P>
  <a id="rename_inf_rule">
    <h2>Rename an inference rule</h2>
  </a>
  {% if not current_user.is_anonymous %}
<form method="post" action="">
    <!-- https://flask-wtf.readthedocs.io/en/v0.12/csrf.html -->
    {{ rename_infrule_webform.csrf_token }}
  <div class="form-group">
    <div class="input-group">
        <span class="input-group-addon">Select from</span>
            <select name="rename_inf_rule_from" class="selectpicker form-control">
              {% for elem in sorted_list_infrules %}
              <option value="{{ elem }}">{{ elem }}</option>
              {% endfor %}
            </select>
<P>{{ rename_infrule_webform.revised_text.label }}: {{ rename_infrule_webform.revised_text(size=50, maxlength=300) }} <small>max length = 300 characters</small>
    </div>
    <button type="submit" class="btn btn-default">Rename</button>
  </div>
</form>
  {% else %}
  This action requires you to be <a href="{{ url_for('login') }}?referrer=list_all_inference_rules">signed in</a>
  {% endif %}
</P>

<P>
  <a id="edit_inf_rule_latex">
    <h2>Edit the latex for an inference rule</h2>
  </a>
  {% if not current_user.is_anonymous %}
<form method="post" action="">
    <!-- https://flask-wtf.readthedocs.io/en/v0.12/csrf.html -->
    {{ edit_infrule_latex_webform.csrf_token }}
  <div class="form-group">
    <div class="input-group">
        <span class="input-group-addon">Select from</span>
            <select name="edit_inf_rule_latex" class="selectpicker form-control">
              {% for elem in sorted_list_infrules %}
              <option value="{{ elem }}">{{ elem }}</option>
              {% endfor %}
            </select>
<P>{{ edit_infrule_latex_webform.revised_text.label }}: {{ edit_infrule_latex_webform.revised_text(size=50, maxlength=300) }} <small>max length = 300 characters</small>
    </div>
    <button type="submit" class="btn btn-default">Update</button>
  </div>
</form>
  {% else %}
  This action requires you to be <a href="{{ url_for('login') }}?referrer=list_all_inference_rules">signed in</a>
  {% endif %}
</P>


{% endblock %}

